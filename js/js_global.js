!function(r,l){function n(t){return!r(t).parents().andSelf().filter(function(){return"hidden"===r.curCSS(this,"visibility")||r.expr.filters.hidden(this)}).length}r.ui=r.ui||{},r.ui.version||(r.extend(r.ui,{version:"1.8.4",plugin:{add:function(t,e,i){for(var n in t=r.ui[t].prototype,i)t.plugins[n]=t.plugins[n]||[],t.plugins[n].push([e,i[n]])},call:function(t,e,i){if((e=t.plugins[e])&&t.element[0].parentNode)for(var n=0;n<e.length;n++)t.options[e[n][0]]&&e[n][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(t,e){return"hidden"!==r(t).css("overflow")&&(0<t[e=e&&"left"===e?"scrollLeft":"scrollTop"]||(t[e]=1,i=0<t[e],t[e]=0,i));var i},isOverAxis:function(t,e,i){return e<t&&t<e+i},isOver:function(t,e,i,n,s,o){return r.ui.isOverAxis(t,i,s)&&r.ui.isOverAxis(e,n,o)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),r.fn.extend({_focus:r.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){r(t).focus(),i&&i.call(t)},e)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var t=r.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(r.curCSS(this,"position",1))&&/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!t.length?r(document):t},zIndex:function(t){if(t!==l)return this.css("zIndex",t);if(this.length){t=r(this[0]);for(var e;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(e=parseInt(t.css("zIndex")),!isNaN(e)&&0!=e))return e;t=t.parent()}}return 0}}),r.each(["Width","Height"],function(t,i){function n(t,e,i,n){return r.each(s,function(){e-=parseFloat(r.curCSS(t,"padding"+this,!0))||0,i&&(e-=parseFloat(r.curCSS(t,"border"+this+"Width",!0))||0),n&&(e-=parseFloat(r.curCSS(t,"margin"+this,!0))||0)}),e}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:r.fn.innerWidth,innerHeight:r.fn.innerHeight,outerWidth:r.fn.outerWidth,outerHeight:r.fn.outerHeight};r.fn["inner"+i]=function(t){return t===l?a["inner"+i].call(this):this.each(function(){r.style(this,o,n(this,t)+"px")})},r.fn["outer"+i]=function(t,e){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){r.style(this,o,n(this,t,!0,e)+"px")})}}),r.extend(r.expr[":"],{data:function(t,e,i){return!!r.data(t,i[3])},focusable:function(t){var e=t.nodeName.toLowerCase(),i=r.attr(t,"tabindex");return"area"===e?(i=(e=t.parentNode).name,!(!t.href||!i||"map"!==e.nodeName.toLowerCase())&&!!(t=r("img[usemap=#"+i+"]")[0])&&n(t)):(/input|select|textarea|button|object/.test(e)?!t.disabled:"a"==e&&t.href||!isNaN(i))&&n(t)},tabbable:function(t){var e=r.attr(t,"tabindex");return(isNaN(e)||0<=e)&&r(t).is(":focusable")}}))}(jQuery),function(a){var i=a.fn.remove;a.fn.remove=function(t,e){return this.each(function(){return e||t&&!a.filter(t,[this]).length||a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")}),i.call(a(this),t,e)})},a.widget=function(e,t,i){var n=e.split(".")[0],s=n+"-"+(e=e.split(".")[1]);i||(i=t,t=a.Widget),a.expr[":"][s]=function(t){return!!a.data(t,e)},a[n]=a[n]||{},a[n][e]=function(t,e){arguments.length&&this._createWidget(t,e)},(t=new t).options=a.extend(!0,{},t.options),a[n][e].prototype=a.extend(!0,t,{namespace:n,widgetName:e,widgetEventPrefix:a[n][e].prototype.widgetEventPrefix||e,widgetBaseClass:s},i),a.widget.bridge(e,a[n][e])},a.widget.bridge=function(o,e){a.fn[o]=function(i){var t="string"==typeof i,n=Array.prototype.slice.call(arguments,1),s=this;return i=!t&&n.length?a.extend.apply(null,[!0,i].concat(n)):i,t&&"_"===i.substring(0,1)||(t?this.each(function(){var t=a.data(this,o),e=t&&a.isFunction(t[i])?t[i].apply(t,n):t;if(e!==t&&void 0!==e)return s=e,!1}):this.each(function(){var t=a.data(this,o);t?(i&&t.option(i),t._init()):a.data(this,o,new e(i,this))})),s}},a.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,e){a.data(e,this.widgetName,this),this.element=a(e),this.options=a.extend(!0,{},this.options,a.metadata&&a.metadata.get(e)[this.widgetName],t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,e){var i=t,n=this;if(0===arguments.length)return a.extend({},n.options);if("string"==typeof t){if(void 0===e)return this.options[t];(i={})[t]=e}return a.each(i,function(t,e){n._setOption(t,e)}),n},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,e,i){var n,s=this.options[t];if((e=a.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i=i||{},e.originalEvent)for(t=a.event.props.length;t;)e[n=a.event.props[--t]]=e.originalEvent[n];return this.element.trigger(e,i),!(a.isFunction(s)&&!1===s.call(this.element[0],e,i)||e.isDefaultPrevented())}}}(jQuery),function(s){s.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(e._preventClickEvent)return e._preventClickEvent=!1,t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1==t.which,n="string"==typeof this.options.cancel&&s(t.target).parents().add(t.target).filter(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},s(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),s.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0))}},_mouseMove:function(t){return s.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t))?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return s(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(d){d.ui=d.ui||{};var i=/left|center|right/,n=/top|center|bottom/,s=d.fn.position,o=d.fn.offset;d.fn.position=function(o){if(!o||!o.of)return s.apply(this,arguments);o=d.extend({},o);var a,r,t=d(o.of),l=(o.collision||"flip").split(" "),c=o.offset?o.offset.split(" "):[0,0],e=9===o.of.nodeType?(a=t.width(),r=t.height(),{top:0,left:0}):o.of.scrollTo&&o.of.document?(a=t.width(),r=t.height(),{top:t.scrollTop(),left:t.scrollLeft()}):o.of.preventDefault?(o.at="left top",a=r=0,{top:o.of.pageY,left:o.of.pageX}):(a=t.outerWidth(),r=t.outerHeight(),t.offset());return d.each(["my","at"],function(){var t=(o[this]||"").split(" ");1===t.length&&(t=i.test(t[0])?t.concat(["center"]):n.test(t[0])?["center"].concat(t):["center","center"]),t[0]=i.test(t[0])?t[0]:"center",t[1]=n.test(t[1])?t[1]:"center",o[this]=t}),1===l.length&&(l[1]=l[0]),c[0]=parseInt(c[0],10)||0,1===c.length&&(c[1]=c[0]),c[1]=parseInt(c[1],10)||0,"right"===o.at[0]?e.left+=a:"center"===o.at[0]&&(e.left+=a/2),"bottom"===o.at[1]?e.top+=r:"center"===o.at[1]&&(e.top+=r/2),e.left+=c[0],e.top+=c[1],this.each(function(){var t=d(this),i=t.outerWidth(),n=t.outerHeight(),s=d.extend({},e);"right"===o.my[0]?s.left-=i:"center"===o.my[0]&&(s.left-=i/2),"bottom"===o.my[1]?s.top-=n:"center"===o.my[1]&&(s.top-=n/2),s.left=parseInt(s.left),s.top=parseInt(s.top),d.each(["left","top"],function(t,e){d.ui.position[l[t]]&&d.ui.position[l[t]][e](s,{targetWidth:a,targetHeight:r,elemWidth:i,elemHeight:n,offset:c,my:o.my,at:o.at})}),d.fn.bgiframe&&t.bgiframe(),t.offset(d.extend(s,{using:o.using}))})},d.ui.position={fit:{left:function(t,e){var i=d(window);e=t.left+e.elemWidth-i.width()-i.scrollLeft(),t.left=0<e?t.left-e:Math.max(0,t.left)},top:function(t,e){var i=d(window);e=t.top+e.elemHeight-i.height()-i.scrollTop(),t.top=0<e?t.top-e:Math.max(0,t.top)}},flip:{left:function(t,e){var i,n,s;"center"!==e.at[0]&&(i=d(window),i=t.left+e.elemWidth-i.width()-i.scrollLeft(),n="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,s=-2*e.offset[0],t.left+=t.left<0?n+e.targetWidth+s:0<i?n-e.targetWidth+s:0)},top:function(t,e){var i,n,s,o;"center"!==e.at[1]&&(i=d(window),i=t.top+e.elemHeight-i.height()-i.scrollTop(),n="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,s="top"===e.at[1]?e.targetHeight:-e.targetHeight,o=-2*e.offset[1],t.top+=t.top<0?n+e.targetHeight+o:0<i?n+s+o:0)}}},d.offset.setOffset||(d.offset.setOffset=function(t,e){/static/.test(d.curCSS(t,"position"))&&(t.style.position="relative");var i=d(t),n=i.offset(),s=parseInt(d.curCSS(t,"top",!0),10)||0,o=parseInt(d.curCSS(t,"left",!0),10)||0,n={top:e.top-n.top+s,left:e.left-n.left+o};"using"in e?e.using.call(t,n):i.css(n)},d.fn.offset=function(t){var e=this[0];return e&&e.ownerDocument?t?this.each(function(){d.offset.setOffset(this,t)}):o.call(this):null})}(jQuery),function(_){_.widget("ui.draggable",_.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||_(t.target).is(".ui-resizable-handle")||(this.handle=this._getHandle(t),!this.handle))},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),_.ui.ddmanager&&(_.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},_.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),_.ui.ddmanager&&!e.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,e){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!e){if(e=this._uiHash(),!1===this._trigger("drag",t,e))return this._mouseUp({}),!1;this.position=e.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),_.ui.ddmanager&&_.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e,i=!1;return _.ui.ddmanager&&!this.options.dropBehaviour&&(i=_.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.element[0]&&this.element[0].parentNode&&("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||_.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?_((e=this).helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear()),!1},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var e=!this.options.handle||!_(this.options.handle,this.element).length;return _(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(e=!0)}),e},_createHelper:function(t){var e=this.options;return(t=_.isFunction(e.helper)?_(e.helper.apply(this.element[0],[t])):"clone"==e.helper?this.element.clone():this.element).parents("body").length||t.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo),t[0]==this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),_.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&_.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"==i.containment&&(i.containment=this.helper[0].parentNode),"document"!=i.containment&&"window"!=i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,_("document"==i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(_("document"==i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array?i.containment.constructor==Array&&(this.containment=i.containment):(t=_(i.containment)[0])&&(i=_(i.containment).offset(),e="hidden"!=_(t).css("overflow"),this.containment=[i.left+(parseInt(_(t).css("borderLeftWidth"),10)||0)+(parseInt(_(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(_(t).css("borderTopWidth"),10)||0)+(parseInt(_(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(_(t).css("borderLeftWidth"),10)||0)-(parseInt(_(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(_(t).css("borderTopWidth"),10)||0)-(parseInt(_(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position,t="absolute"==t?1:-1;var i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop())*t),left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())*t)}},_generatePosition:function(t){var e=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName),s=t.pageX,o=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),e.grid&&(o=this.originalPageY+Math.round((o-this.originalPageY)/e.grid[1])*e.grid[1],o=this.containment&&(o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3])?o-this.offset.click.top<this.containment[1]?o+e.grid[1]:o-e.grid[1]:o,s=this.originalPageX+Math.round((s-this.originalPageX)/e.grid[0])*e.grid[0],s=this.containment&&(s-this.offset.click.left<this.containment[0]||s-this.offset.click.left>this.containment[2])?s-this.offset.click.left<this.containment[0]?s+e.grid[0]:s-e.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,e,i){return i=i||this._uiHash(),_.ui.plugin.call(this,t,[e,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),_.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),_.extend(_.ui.draggable,{version:"1.8.4"}),_.ui.plugin.add("draggable","connectToSortable",{start:function(e,t){var i=_(this).data("draggable"),n=i.options,s=_.extend({},t,{item:i.element});i.sortables=[],_(n.connectToSortable).each(function(){var t=_.data(this,"sortable");t&&!t.options.disabled&&(i.sortables.push({instance:t,shouldRevert:t.options.revert}),t._refreshItems(),t._trigger("activate",e,s))})},stop:function(t,e){var i=_(this).data("draggable"),n=_.extend({},e,{item:i.element});_.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,e){var i=_(this).data("draggable"),n=this;_.each(i.sortables,function(){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=_(n).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),_.ui.plugin.add("draggable","cursor",{start:function(){var t=_("body"),e=_(this).data("draggable").options;t.css("cursor")&&(e._cursor=t.css("cursor")),t.css("cursor",e.cursor)},stop:function(){var t=_(this).data("draggable").options;t._cursor&&_("body").css("cursor",t._cursor)}}),_.ui.plugin.add("draggable","iframeFix",{start:function(){var t=_(this).data("draggable").options;_(!0===t.iframeFix?"iframe":t.iframeFix).each(function(){_('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(_(this).offset()).appendTo("body")})},stop:function(){_("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),_.ui.plugin.add("draggable","opacity",{start:function(t,e){t=_(e.helper),e=_(this).data("draggable").options,t.css("opacity")&&(e._opacity=t.css("opacity")),t.css("opacity",e.opacity)},stop:function(t,e){(t=_(this).data("draggable").options)._opacity&&_(e.helper).css("opacity",t._opacity)}}),_.ui.plugin.add("draggable","scroll",{start:function(){var t=_(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var e=_(this).data("draggable"),i=e.options,n=!1;e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?e.scrollParent[0].scrollTop=n=e.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-e.overflowOffset.top<i.scrollSensitivity&&(e.scrollParent[0].scrollTop=n=e.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?e.scrollParent[0].scrollLeft=n=e.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-e.overflowOffset.left<i.scrollSensitivity&&(e.scrollParent[0].scrollLeft=n=e.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-_(document).scrollTop()<i.scrollSensitivity?n=_(document).scrollTop(_(document).scrollTop()-i.scrollSpeed):_(window).height()-(t.pageY-_(document).scrollTop())<i.scrollSensitivity&&(n=_(document).scrollTop(_(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-_(document).scrollLeft()<i.scrollSensitivity?n=_(document).scrollLeft(_(document).scrollLeft()-i.scrollSpeed):_(window).width()-(t.pageX-_(document).scrollLeft())<i.scrollSensitivity&&(n=_(document).scrollLeft(_(document).scrollLeft()+i.scrollSpeed)))),!1!==n&&_.ui.ddmanager&&!i.dropBehaviour&&_.ui.ddmanager.prepareOffsets(e,t)}}),_.ui.plugin.add("draggable","snap",{start:function(){var i=_(this).data("draggable"),t=i.options;i.snapElements=[],_(t.snap.constructor!=String?t.snap.items||":data(draggable)":t.snap).each(function(){var t=_(this),e=t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e){for(var i=_(this).data("draggable"),n=i.options,s=n.snapTolerance,o=e.offset.left,a=o+i.helperProportions.width,r=e.offset.top,l=r+i.helperProportions.height,c=i.snapElements.length-1;0<=c;c--){var d,u,h,p,f,m=i.snapElements[c].left,g=m+i.snapElements[c].width,b=i.snapElements[c].top,v=b+i.snapElements[c].height;m-s<o&&o<g+s&&b-s<r&&r<v+s||m-s<o&&o<g+s&&b-s<l&&l<v+s||m-s<a&&a<g+s&&b-s<r&&r<v+s||m-s<a&&a<g+s&&b-s<l&&l<v+s?("inner"!=n.snapMode&&(d=Math.abs(b-l)<=s,u=Math.abs(v-r)<=s,h=Math.abs(m-a)<=s,p=Math.abs(g-o)<=s,d&&(e.position.top=i._convertPositionTo("relative",{top:b-i.helperProportions.height,left:0}).top-i.margins.top),u&&(e.position.top=i._convertPositionTo("relative",{top:v,left:0}).top-i.margins.top),h&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m-i.helperProportions.width}).left-i.margins.left),p&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g}).left-i.margins.left)),f=d||u||h||p,"outer"!=n.snapMode&&(d=Math.abs(b-r)<=s,u=Math.abs(v-l)<=s,h=Math.abs(m-o)<=s,p=Math.abs(g-a)<=s,d&&(e.position.top=i._convertPositionTo("relative",{top:b,left:0}).top-i.margins.top),u&&(e.position.top=i._convertPositionTo("relative",{top:v-i.helperProportions.height,left:0}).top-i.margins.top),h&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m}).left-i.margins.left),p&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g-i.helperProportions.width}).left-i.margins.left)),!i.snapElements[c].snapping&&(d||u||h||p||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,_.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=d||u||h||p||f):(i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,_.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1)}}}),_.ui.plugin.add("draggable","stack",{start:function(){var e,t=_(this).data("draggable").options;(t=_.makeArray(_(t.stack)).sort(function(t,e){return(parseInt(_(t).css("zIndex"),10)||0)-(parseInt(_(e).css("zIndex"),10)||0)})).length&&(e=parseInt(t[0].style.zIndex)||0,_(t).each(function(t){this.style.zIndex=e+t}),this[0].style.zIndex=e+t.length)}}),_.ui.plugin.add("draggable","zIndex",{start:function(t,e){t=_(e.helper),e=_(this).data("draggable").options,t.css("zIndex")&&(e._zIndex=t.css("zIndex")),t.css("zIndex",e.zIndex)},stop:function(t,e){(t=_(this).data("draggable").options)._zIndex&&_(e.helper).css("zIndex",t._zIndex)}})}(jQuery),function(s){function o(t){s(":ui-button",t.target.form).each(function(){var t=s(this).data("button");setTimeout(function(){t.refresh()},1)})}function a(t){var e=t.name,i=t.form,n=s([]);return e&&(n=i?s(i).find("[name='"+e+"']"):s("[name='"+e+"']",t.ownerDocument).filter(function(){return!this.form})),n}var r;s.widget("ui.button",{options:{text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",o),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,t="checkbox"===this.type||"radio"===this.type,n="ui-state-hover"+(t?"":" ui-state-active");null===i.label&&(i.label=this.buttonElement.html()),this.element.is(":disabled")&&(i.disabled=!0),this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){i.disabled||(s(this).addClass("ui-state-hover"),this===r&&s(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){i.disabled||s(this).removeClass(n)}).bind("focus.button",function(){s(this).addClass("ui-state-focus")}).bind("blur.button",function(){s(this).removeClass("ui-state-focus")}),t&&this.element.bind("change.button",function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled)return!1;s(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled)return!1;s(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed",!0);var t=e.element[0];a(t).not(t).map(function(){return s(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",!1)}):(this.buttonElement.bind("mousedown.button",function(){if(i.disabled)return!1;s(this).addClass("ui-state-active"),r=this,s(document).one("mouseup",function(){r=null})}).bind("mouseup.button",function(){if(i.disabled)return!1;s(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(i.disabled)return!1;t.keyCode!=s.ui.keyCode.SPACE&&t.keyCode!=s.ui.keyCode.ENTER||s(this).addClass("ui-state-active")}).bind("keyup.button",function(){s(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===s.ui.keyCode.SPACE&&s(this).click()})),this._setOption("disabled",i.disabled)},_determineButtonType:function(){var t;this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]"),this.element.addClass("ui-helper-hidden-accessible"),(t=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",t)):this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),s.Widget.prototype.destroy.call(this)},_setOption:function(t,e){s.Widget.prototype._setOption.apply(this,arguments),"disabled"===t&&(e?this.element.attr("disabled",!0):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?a(this.element[0]).each(function(){s(this).is(":checked")?s(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):s(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){var t,e,i,n;"input"===this.type?this.options.label&&this.element.val(this.options.label):(t=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),e=s("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=(i=this.options.icons).primary&&i.secondary,i.primary||i.secondary?(t.addClass("ui-button-text-icon"+(n?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(t.addClass(n?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary"),this.hasTitle||t.attr("title",e))):t.addClass("ui-button-text-only"))}}),s.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset"),this._init()},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),s.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return s(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return s(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),s.Widget.prototype.destroy.call(this)}})}(jQuery),function(r){r.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=r(this).css(t).offset().top;e<0&&r(this).css("top",t.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle="");var e=this,i=e.options,t=i.title||e.originalTitle||"&#160;",n=r.ui.dialog.getTitleId(e.element),s=(e.uiDialog=r("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(t){i.closeOnEscape&&t.keyCode&&t.keyCode===r.ui.keyCode.ESCAPE&&(e.close(t),t.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(t){e.moveToTop(!1,t)});e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s);var o=(e.uiDialogTitlebar=r("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(s),a=r('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).focus(function(){a.addClass("ui-state-focus")}).blur(function(){a.removeClass("ui-state-focus")}).click(function(t){return e.close(t),!1}).appendTo(o);(e.uiDialogTitlebarCloseText=r("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(a),r("<span></span>").addClass("ui-dialog-title").attr("id",n).html(t).prependTo(o),r.isFunction(i.beforeclose)&&!r.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),o.find("*").add(o).disableSelection(),i.draggable&&r.fn.draggable&&e._makeDraggable(),i.resizable&&r.fn.resizable&&e._makeResizable(),e._createButtons(i.buttons),e._isOpen=!1,r.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(t){var e,i=this;if(!1!==i._trigger("beforeClose",t))return i.overlay&&i.overlay.destroy(),i.uiDialog.unbind("keypress.ui-dialog"),i._isOpen=!1,i.options.hide?i.uiDialog.hide(i.options.hide,function(){i._trigger("close",t)}):(i.uiDialog.hide(),i._trigger("close",t)),r.ui.dialog.overlay.resize(),i.options.modal&&(e=0,r(".ui-dialog").each(function(){this!==i.uiDialog[0]&&(e=Math.max(e,r(this).css("z-index")))}),r.ui.dialog.maxZ=e),i},isOpen:function(){return this._isOpen},moveToTop:function(t,e){var i=this,n=i.options;return n.modal&&!t||!n.stack&&!n.modal?i._trigger("focus",e):(n.zIndex>r.ui.dialog.maxZ&&(r.ui.dialog.maxZ=n.zIndex),i.overlay&&(r.ui.dialog.maxZ+=1,i.overlay.$el.css("z-index",r.ui.dialog.overlay.maxZ=r.ui.dialog.maxZ)),t={scrollTop:i.element.attr("scrollTop"),scrollLeft:i.element.attr("scrollLeft")},r.ui.dialog.maxZ+=1,i.uiDialog.css("z-index",r.ui.dialog.maxZ),i.element.attr(t),i._trigger("focus",e),i)},open:function(){if(!this._isOpen){var t=this,e=t.options,i=t.uiDialog;return t.overlay=e.modal?new r.ui.dialog.overlay(t):null,i.next().length&&i.appendTo("body"),t._size(),t._position(e.position),i.show(e.show),t.moveToTop(!0),e.modal&&i.bind("keypress.ui-dialog",function(t){if(t.keyCode===r.ui.keyCode.TAB){var e=(i=r(":tabbable",this)).filter(":first"),i=i.filter(":last");if(t.target===i[0]&&!t.shiftKey)return e.focus(1),!1;if(t.target===e[0]&&t.shiftKey)return i.focus(1),!1}}),r(t.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).focus(),t._trigger("open"),t._isOpen=!0,t}},_createButtons:function(t){var i=this,e=!1,n=r("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),s=r("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&r.each(t,function(){return!(e=!0)}),e&&(r.each(t,function(t,e){t=r('<button type="button"></button>').text(t).click(function(){e.apply(i.element[0],arguments)}).appendTo(s),r.fn.button&&t.button()}),n.appendTo(i.uiDialog))},_makeDraggable:function(){function i(t){return{position:t.position,offset:t.offset}}var n,s=this,o=s.options,a=r(document);s.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){n="auto"===o.height?"auto":r(this).height(),r(this).height(r(this).height()).addClass("ui-dialog-dragging"),s._trigger("dragStart",t,i(e))},drag:function(t,e){s._trigger("drag",t,i(e))},stop:function(t,e){o.position=[e.position.left-a.scrollLeft(),e.position.top-a.scrollTop()],r(this).removeClass("ui-dialog-dragging").height(n),s._trigger("dragStop",t,i(e)),r.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function i(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}t=void 0===t?this.options.resizable:t;var n=this,s=n.options,e=n.uiDialog.css("position");t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw",n.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:n.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:n._minHeight(),handles:t,start:function(t,e){r(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",t,i(e))},resize:function(t,e){n._trigger("resize",t,i(e))},stop:function(t,e){r(this).removeClass("ui-dialog-resizing"),s.height=r(this).height(),s.width=r(this).width(),n._trigger("resizeStop",t,i(e)),r.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(t){var e,i=[],n=[0,0];t=t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(1===(i=t.split?t.split(" "):[t[0],t[1]]).length&&(i[1]=i[0]),r.each(["left","top"],function(t,e){+i[t]===i[t]&&(n[t]=i[t],i[t]=e)}),t={my:i.join(" "),at:i.join(" "),offset:n.join(" ")}),r.extend({},r.ui.dialog.prototype.options.position,t)):r.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(t),e||this.uiDialog.hide()},_setOption:function(t,e){var i=this,n=i.uiDialog,s=n.is(":data(resizable)"),o=!1;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(e),o=!0;break;case"closeText":i.uiDialogTitlebarCloseText.text(""+e);break;case"dialogClass":n.removeClass(i.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+e);break;case"disabled":e?n.addClass("ui-dialog-disabled"):n.removeClass("ui-dialog-disabled");break;case"draggable":e?i._makeDraggable():n.draggable("destroy");break;case"height":o=!0;break;case"maxHeight":s&&n.resizable("option","maxHeight",e),o=!0;break;case"maxWidth":s&&n.resizable("option","maxWidth",e),o=!0;break;case"minHeight":s&&n.resizable("option","minHeight",e),o=!0;break;case"minWidth":s&&n.resizable("option","minWidth",e),o=!0;break;case"position":i._position(e);break;case"resizable":s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||!1===e||i._makeResizable(e);break;case"title":r(".ui-dialog-title",i.uiDialogTitlebar).html(""+(e||"&#160;"));break;case"width":o=!0}r.Widget.prototype._setOption.apply(i,arguments),o&&i._size()},_size:function(){var t,e=this.options;this.element.css({width:"auto",minHeight:0,height:0}),e.minWidth>e.width&&(e.width=e.minWidth),t=this.uiDialog.css({height:"auto",width:e.width}).height(),this.element.css("auto"===e.height?{minHeight:Math.max(e.minHeight-t,0),height:"auto"}:{minHeight:0,height:Math.max(e.height-t,0)}).show(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),r.extend(r.ui.dialog,{version:"1.8.4",uuid:0,maxZ:0,getTitleId:function(t){return(t=t.attr("id"))||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=r.ui.dialog.overlay.create(t)}}),r.extend(r.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:r.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){r.ui.dialog.overlay.instances.length&&r(document).bind(r.ui.dialog.overlay.events,function(t){return r(t.target).zIndex()>=r.ui.dialog.overlay.maxZ})},1),r(document).bind("keydown.dialog-overlay",function(t){e.options.closeOnEscape&&t.keyCode&&t.keyCode===r.ui.keyCode.ESCAPE&&(e.close(t),t.preventDefault())}),r(window).bind("resize.dialog-overlay",r.ui.dialog.overlay.resize));var t=(this.oldInstances.pop()||r("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return r.fn.bgiframe&&t.bgiframe(),this.instances.push(t),t},destroy:function(t){this.oldInstances.push(this.instances.splice(r.inArray(t,this.instances),1)[0]),0===this.instances.length&&r([document,window]).unbind(".dialog-overlay"),t.remove();var e=0;r.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var t;return r.browser.msie&&r.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?r(window).height()+"px":t+"px":r(document).height()+"px"},width:function(){var t;return r.browser.msie&&r.browser.version<7?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?r(window).width()+"px":t+"px":r(document).width()+"px"},resize:function(){var t=r([]);r.each(r.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:r.ui.dialog.overlay.width(),height:r.ui.dialog.overlay.height()})}}),r.extend(r.ui.dialog.overlay.prototype,{destroy:function(){r.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(h){var e=0,i=0;h.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(t,e){"selected"==t?this.options.collapsible&&e==this.options.selected||this.select(e):(this.options[t]=e,this._tabify())},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++e},_sanitizeSelector:function(t){return t.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++i);return h.cookie.apply(null,[t].concat(h.makeArray(arguments)))},_ui:function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=h(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function i(t,e){t.css("display",""),!h.support.opacity&&e.opacity&&t[0].style.removeAttribute("filter")}var e,n,s,o,a,r=this,l=this.options,c=/^#.+/;for(this.list=this.element.find("ol,ul").eq(0),this.lis=h(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return h("a",this)[0]}),this.panels=h([]),this.anchors.each(function(t,e){var i,n=h(e).attr("href"),s=n.split("#")[0];s&&(s===location.toString().split("#")[0]||(i=h("base")[0])&&s===i.href)&&(n=e.hash,e.href=n),c.test(n)?r.panels=r.panels.add(r._sanitizeSelector(n)):n&&"#"!==n?(h.data(e,"href.tabs",n),h.data(e,"load.tabs",n.replace(/#.*$/,"")),n=r._tabId(e),e.href="#"+n,(e=h("#"+n)).length||(e=h(l.panelTemplate).attr("id",n).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list)).data("destroy.tabs",!0),r.panels=r.panels.add(e)):l.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===l.selected?(location.hash&&this.anchors.each(function(t,e){if(e.hash==location.hash)return l.selected=t,!1}),"number"!=typeof l.selected&&l.cookie&&(l.selected=parseInt(r._cookie(),10)),"number"!=typeof l.selected&&this.lis.filter(".ui-tabs-selected").length&&(l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),l.selected=l.selected||(this.lis.length?0:-1)):null===l.selected&&(l.selected=-1),l.selected=0<=l.selected&&this.anchors[l.selected]||l.selected<0?l.selected:0,l.disabled=h.unique(l.disabled.concat(h.map(this.lis.filter(".ui-state-disabled"),function(t){return r.lis.index(t)}))).sort(),-1!=h.inArray(l.selected,l.disabled)&&l.disabled.splice(h.inArray(l.selected,l.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),0<=l.selected&&this.anchors.length&&(this.panels.eq(l.selected).removeClass("ui-tabs-hide"),this.lis.eq(l.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[l.selected],r.panels[l.selected]))}),this.load(l.selected)),h(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[l.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),l.cookie&&this._cookie(l.selected,l.cookie),t=0;e=this.lis[t];t++)h(e)[-1==h.inArray(t,l.disabled)||h(e).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");!1===l.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==l.event&&(n=function(t,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+t)},s=function(t,e){e.removeClass("ui-state-"+t)},this.lis.bind("mouseover.tabs",function(){n("hover",h(this))}),this.lis.bind("mouseout.tabs",function(){s("hover",h(this))}),this.anchors.bind("focus.tabs",function(){n("focus",h(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){s("focus",h(this).closest("li"))})),l.fx&&(h.isArray(l.fx)?(o=l.fx[0],a=l.fx[1]):o=a=l.fx);var d=a?function(t,e){h(t).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(a,a.duration||"normal",function(){i(e,a),r._trigger("show",null,r._ui(t,e[0]))})}:function(t,e){h(t).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,e[0]))},u=o?function(t,e){e.animate(o,o.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),i(e,o),r.element.dequeue("tabs")})}:function(t,e){r.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(l.event+".tabs",function(){var t=this,e=h(t).closest("li"),i=r.panels.filter(":not(.ui-tabs-hide)"),n=h(r._sanitizeSelector(t.hash));if(e.hasClass("ui-tabs-selected")&&!l.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||r.panels.filter(":animated").length||!1===r._trigger("select",null,r._ui(this,n[0])))return this.blur(),!1;if(l.selected=r.anchors.index(this),r.abort(),l.collapsible){if(e.hasClass("ui-tabs-selected"))return l.selected=-1,l.cookie&&r._cookie(l.selected,l.cookie),r.element.queue("tabs",function(){u(t,i)}).dequeue("tabs"),this.blur(),!1;if(!i.length)return l.cookie&&r._cookie(l.selected,l.cookie),r.element.queue("tabs",function(){d(t,n)}),r.load(r.anchors.index(this)),this.blur(),!1}if(l.cookie&&r._cookie(l.selected,l.cookie),!n.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";i.length&&r.element.queue("tabs",function(){u(t,i)}),r.element.queue("tabs",function(){d(t,n)}),r.load(r.anchors.index(this)),h.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$="+t+"]"))),t},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=h.data(this,"href.tabs");t&&(this.href=t);var i=h(this).unbind(".tabs");h.each(["href","load","cache"],function(t,e){i.removeData(e+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){h.data(this,"destroy.tabs")?h(this).remove():h(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,e,i){void 0===i&&(i=this.anchors.length);var n=this,s=this.options;e=h(s.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,e)),t=t.indexOf("#")?this._tabId(h("a",e)[0]):t.replace("#",""),e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var o=h("#"+t);return o.length||(o=h(s.panelTemplate).attr("id",t).data("destroy.tabs",!0)),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(e.appendTo(this.list),o.appendTo(this.list[0].parentNode)):(e.insertBefore(this.lis[i]),o.insertBefore(this.panels[i])),s.disabled=h.map(s.disabled,function(t){return i<=t?++t:t}),this._tabify(),1==this.anchors.length&&(s.selected=0,e.addClass("ui-tabs-selected ui-state-active"),o.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(e){e=this._getIndex(e);var t=this.options,i=this.lis.eq(e).remove(),n=this.panels.eq(e).remove();return i.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(e+(e+1<this.anchors.length?1:-1)),t.disabled=h.map(h.grep(t.disabled,function(t){return t!=e}),function(t){return e<=t?--t:t}),this._tabify(),this._trigger("remove",null,this._ui(i.find("a")[0],n[0])),this},enable:function(e){e=this._getIndex(e);var t=this.options;if(-1!=h.inArray(e,t.disabled))return this.lis.eq(e).removeClass("ui-state-disabled"),t.disabled=h.grep(t.disabled,function(t){return t!=e}),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},disable:function(t){t=this._getIndex(t);var e=this.options;return t!=e.selected&&(this.lis.eq(t).addClass("ui-state-disabled"),e.disabled.push(t),e.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))),this},select:function(t){if(-1==(t=this._getIndex(t))){if(!this.options.collapsible||-1==this.options.selected)return this;t=this.options.selected}return this.anchors.eq(t).trigger(this.options.event+".tabs"),this},load:function(i){i=this._getIndex(i);var t,n=this,s=this.options,o=this.anchors.eq(i)[0],e=h.data(o,"load.tabs");if(this.abort(),e&&(0===this.element.queue("tabs").length||!h.data(o,"cache.tabs")))return this.lis.eq(i).addClass("ui-state-processing"),s.spinner&&(t=h("span",o)).data("label.tabs",t.html()).html(s.spinner),this.xhr=h.ajax(h.extend({},s.ajaxOptions,{url:e,success:function(t,e){h(n._sanitizeSelector(o.hash)).html(t),n._cleanup(),s.cache&&h.data(o,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[i],n.panels[i]));try{s.ajaxOptions.success(t,e)}catch(t){}},error:function(t,e){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[i],n.panels[i]));try{s.ajaxOptions.error(t,e,i,o)}catch(t){}}})),n.element.dequeue("tabs"),this;this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(t,e){return this.anchors.eq(t).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),h.extend(h.ui.tabs,{version:"1.8.5"}),h.extend(h.ui.tabs.prototype,{rotation:null,rotate:function(e,i){var n=this,s=this.options,o=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var t=s.selected;n.select(++t<n.anchors.length?t:0)},e),t&&t.stopPropagation()});return i=n._unrotate||(n._unrotate=i?function(){t=s.selected,o()}:function(t){t.clientX&&n.rotate(null)}),e?(this.element.bind("tabsshow",o),this.anchors.bind(s.event+".tabs",i),o()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",o),this.anchors.unbind(s.event+".tabs",i),delete this._rotate,delete this._unrotate),this}})}(jQuery);var menuwidth="165px",disappeardelay=1e3,hidemenu_onclick="yes",ie4=document.all,ns6=document.getElementById&&!document.all;function getposOffset(t,e){for(var i="left"==e?t.offsetLeft:t.offsetTop,n=t.offsetParent;null!=n;)i="left"==e?i+n.offsetLeft:i+n.offsetTop,n=n.offsetParent;return i}function showhide(t,e,i,n,s){(ie4||ns6)&&(dropmenuobj.style.left=dropmenuobj.style.top=-500),""!=s&&(dropmenuobj.widthobj=dropmenuobj.style,dropmenuobj.widthobj.width=s),"click"==e.type&&"none"==$("#dropmenudiv").css("display")||"mouseover"==e.type?$("#dropmenudiv").fadeTo("fast",.9):"click"==e.type&&$("#dropmenudiv").fadeOut("fast")}function iecompattest(){return document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body}function clearbrowseredge(t,e){var i,n,s=0;return"rightedge"==e?(n=ie4&&!window.opera?iecompattest().scrollLeft+iecompattest().clientWidth-15:window.pageXOffset+window.innerWidth-15,dropmenuobj.contentmeasure=dropmenuobj.offsetWidth,n-dropmenuobj.x<dropmenuobj.contentmeasure&&(s=dropmenuobj.contentmeasure-t.offsetWidth)):(i=ie4&&!window.opera?iecompattest().scrollTop:window.pageYOffset,n=ie4&&!window.opera?iecompattest().scrollTop+iecompattest().clientHeight-15:window.pageYOffset+window.innerHeight-18,dropmenuobj.contentmeasure=dropmenuobj.offsetHeight,n-dropmenuobj.y<dropmenuobj.contentmeasure&&(s=dropmenuobj.contentmeasure+t.offsetHeight,dropmenuobj.y-i<dropmenuobj.contentmeasure&&(s=dropmenuobj.y+t.offsetHeight-i))),s}function populatemenu(t){(ie4||ns6)&&(dropmenuobj.innerHTML=t.join(""))}function dropdownmenu(t,e,i,n){return window.event?event.cancelBubble=!0:e.stopPropagation&&e.stopPropagation(),clearhidemenu(),dropmenuobj=document.getElementById?document.getElementById("dropmenudiv"):dropmenudiv,populatemenu(i),(ie4||ns6)&&(showhide(dropmenuobj.style,e,"visible","hidden",n),dropmenuobj.x=getposOffset(t,"left"),dropmenuobj.y=getposOffset(t,"top"),dropmenuobj.style.left=dropmenuobj.x-clearbrowseredge(t,"rightedge")+"px",dropmenuobj.style.top=dropmenuobj.y-clearbrowseredge(t,"bottomedge")+t.offsetHeight+"px"),clickreturnvalue()}function clickreturnvalue(){return!ie4&&!ns6}function contains_ns6(t,e){for(;e.parentNode;)if((e=e.parentNode)==t)return!0;return!1}function dynamichide(t){(ie4&&!dropmenuobj.contains(t.toElement)||ns6&&t.currentTarget!=t.relatedTarget&&!contains_ns6(t.currentTarget,t.relatedTarget))&&delayhidemenu()}function hidemenu(t){"undefined"!=typeof dropmenuobj&&(ie4||ns6)&&$("#dropmenudiv").fadeOut("fast")}function delayhidemenu(){(ie4||ns6)&&(delayhide=setTimeout("hidemenu()",disappeardelay))}function clearhidemenu(){"undefined"!=typeof delayhide&&clearTimeout(delayhide)}(ie4||ns6)&&document.write('<div id="dropmenudiv" style="display:none;position:absolute;z-index:100;width:'+menuwidth+';" onMouseover="clearhidemenu()" onMouseout="dynamichide(event)"></div>'),"yes"==hidemenu_onclick&&(document.onclick=hidemenu);var n_cache=new Array,c_cache=new Array,comm_id,comm_edit_id,s_id,e_id;function whenCompletedCommentsEdit(){setTimeout(function(){$("html:not(:animated)"+($.browser.opera?"":",body:not(:animated)")).animate({scrollTop:$("#comm-id-"+comm_id).position().top-70},700)},100)}function MenuCommBuild(t,e){var i=new Array;return i[0]="<a onclick=\"ajax_comm_edit('"+t+"', '"+e+'\'); return false;" href="#">'+menu_edit+"</a>",i}function setNewField(t,e){t!=selField&&(fombj=e,selField=t)}function ajax_comm_edit(t,e){c_cache[t]&&""!=c_cache[t]||(c_cache[t]=document.getElementById("comm-id-"+t).innerHTML);var i=new bxm_ajax;return comm_id=t,i.onShow(""),i.setVar("id",t),i.setVar("area",e),i.setVar("action","edit"),i.requestFile=bxm_root+"engine/ajax/editComments.php",i.method="GET",i.element="comm-id-"+t,i.execute=!0,i.onCompletion=whenCompletedCommentsEdit,i.sendAJAX(""),!1}function whenCompletedSaveComments(){c_cache[comm_edit_id]=""}function ajax_save_comm_edit(t,e){var i=new bxm_ajax;comm_edit_id=t,i.onShow("");var n="comm_txt="+i.encodeVAR(document.getElementById("editcomments"+t).value);return i.setVar("id",t),i.setVar("area",e),i.setVar("action","save"),i.requestFile=bxm_root+"engine/ajax/editComments.php",i.method="POST",i.element="comm-id-"+t,i.onCompletion=whenCompletedSaveComments,i.sendAJAX(n),!1}function ajax_cancel_comm_edit(t){return""!=n_cache[t]&&(document.getElementById("comm-id-"+t).innerHTML=c_cache[t]),!1}function bxm_smiley(t){if(!document.getElementById("bxm-comments-form"))return!1;document.getElementById("bxm-comments-form").bxmComments.value+=" "+t}function bxmSmilesResult(t){$("#bxmPopup").remove(),$("body").append(t)}function bxmSmiles(){var t=new bxm_ajax;return t.onShow(""),t.setVar("skin",bxm_skin),t.requestFile=bxm_root+"engine/ajax/smiles.php",t.method="POST",t.onCompletion=bxmSmilesResult,t.sendAJAX(""),!1}function bxm_copy_quote(t){bxm_txt="",window.getSelection?bxm_txt=window.getSelection():document.selection&&(bxm_txt=document.selection.createRange().text),""!=bxm_txt&&(bxm_txt="[quote="+t+"]"+bxm_txt+"[/quote]\n")}function bxm_ins(t){if(!document.getElementById("bxm-comments-form"))return!1;var e=document.getElementById("bxm-comments-form").comments;""!=bxm_txt?e.value+=bxm_txt:e.value+="[b]"+t+"[/b],\n"}function bxmLogout(t,e){var i={};i[bxm_act_lang[1]]=function(){$(this).dialog("close")},i[bxm_act_lang[0]]=function(){window.location=bxm_root+"index.php?action=logout"},$("#bxmPopup").remove(),$("body").append("<div id='bxmPopup' title='"+t+"' style='display:none'><br>"+e+"</div>"),$("#bxmPopup").dialog({autoOpen:!0,width:400,minHeight:100,modal:!0,buttons:i})}function bxmRegSucces(t,e){$("#bxmPopup").remove(),$("body").append("<div id='bxmPopup' title='"+t+"' style='display:none'><br>"+e+"</div>"),$("#bxmPopup").dialog({autoOpen:!0,width:400,minHeight:100,modal:!0,buttons:{Ok:function(){$(this).dialog("close"),bxmLoginForm()}}})}function bxmAjaxRegResult(t){$("#bxmPopup").remove(),$("body").append(t),$(document).ready(function(){$("input.q").focus(function(){ds_value=$(this).val(),$(this).val("")}),$("input.q").blur(function(){""==$.trim($(this).val())&&$(this).val(ds_value)}),$("span.password").click(function(){$(this).next().focus()}),$("input.password").focus(function(){" "==$(this).val()&&$(this).val(""),$(this).prev().hide()}),$("input.password").blur(function(){""==$.trim($(this).val())&&($(this).val(""),$(this).prev().show())})})}function bxmRegForm(){var t=new bxm_ajax;return t.onShow(""),t.setVar("skin",bxm_skin),t.requestFile=bxm_root+"engine/ajax/register.php",t.method="POST",t.onCompletion=bxmAjaxRegResult,t.sendAJAX(""),!1}function bxmRegreConfirm(){var t=new bxm_ajax;return t.onShow(""),t.setVar("action","reConfirm"),t.setVar("skin",bxm_skin),t.requestFile=bxm_root+"engine/ajax/register.php",t.method="POST",t.onCompletion=bxmAjaxRegResult,t.sendAJAX(""),!1}function bxmAdminResult(t){$("#bxmPopup").remove(),$("body").append(t)}function bxmAdmin(t,e){if(!(t=parseInt(t)))return!1;if(""==e)return!1;var i=new bxm_ajax;return i.onShow(""),i.setVar("id",t),i.setVar("hash",e),i.setVar("skin",bxm_skin),i.requestFile=bxm_root+"engine/ajax/admin.php",i.method="POST",i.onCompletion=bxmAdminResult,i.sendAJAX(""),!1}function bxmAjaxLoginResult(t){$("#bxmPopup").remove(),$("body").append(t),$("#bxmPopup").dialog({autoOpen:!0,show:"fade",hide:"fade",width:215,minHeight:75,modal:!0,buttons:buttonForm})}function bxmLoginForm(){var t=new bxm_ajax;return t.onShow(""),t.setVar("skin",bxm_skin),t.requestFile=bxm_root+"engine/ajax/login.php",t.method="POST",t.onCompletion=bxmAjaxLoginResult,t.sendAJAX(""),!1}var user_profile="";function ShowPopupProfile(t){return $("#bxmPopup").remove(),$("body").append(t),!1}function ShowProfile(t){if(user_profile==t&&document.getElementById("ShowProfile"))return $("#bxmPopup").dialog("open"),!1;var e=new bxm_ajax;return user_profile=t,e.onShow(""),e.setVar("name",t),e.setVar("skin",bxm_skin),e.requestFile=bxm_root+"engine/ajax/profile.php",e.method="GET",e.onCompletion=ShowPopupProfile,e.sendAJAX(""),!1}function BXMconfirm(t,e,i){var n={};n[bxm_act_lang[1]]=function(){$(this).dialog("close"),$("#bxmPopup").remove()},n[bxm_act_lang[0]]=function(){$(this).dialog("close"),$("#bxmPopup").remove(),i&&i()},$("#bxmPopup").remove(),$("body").append("<div id='bxmPopup' title='"+e+"' style='display:none'><br>"+t+"</div>"),$("#bxmPopup").dialog({autoOpen:!0,width:400,minHeight:100,buttons:n})}function BXMalert(t,e){$("#bxmPopup").remove(),$("body").append("<div id='bxmPopup' title='"+t+"' style='display:none'><br>"+e+"</div>"),$("#bxmPopup").dialog({autoOpen:!0,show:"fade",hide:"fade",width:400,minHeight:100,zIndex:6001,buttons:{Ok:function(){$(this).dialog("close")}}})}function bxmAlert(t,e){$("#bxmPopup").remove(),$("body").append("<div id='bxmPopup' title='"+t+"' style='display:none'>"+e+"</div>"),$("#bxmPopup").dialog({autoOpen:!0,width:400,minHeight:100,zIndex:6001,modal:!0,buttons:{Ok:function(){$(this).dialog("close"),$("#bxmPopup").remove()}}})}function bxmCheckComment(t){if(""==t)return!1;var e=new bxm_ajax;return e.onShow(""),e.setVar("torrents",t),e.setVar("skin",bxm_skin),e.requestFile=bxm_root+"engine/ajax/watcher.php",e.method="POST",e.element="signerText",e.sendAJAX(""),!1}function doAddComments(){var t=document.getElementById("bxm-comments-form"),e=new bxm_ajax;if(""==t.comments.value||""==t.name.value)return BXMalert(bxm_info,bxm_req_field),!1;e.onShow("");var i="torrents_id="+t.torrents_id.value;e.setVar("comments",e.encodeVAR(t.comments.value)),e.setVar("name",e.encodeVAR(t.name.value)),e.setVar("mail",e.encodeVAR(t.mail.value)),e.setVar("skin",bxm_skin),t.sec_code&&e.setVar("sec_code",t.sec_code.value),e.requestFile=bxm_root+"engine/ajax/addcomments.php",e.method="POST",e.execute=!0,e.effect="blind",e.element="bxm-ajax-comments",e.sendAJAX(i)}function doAddCommentsNews(){var t=document.getElementById("bxm-comments-form"),e=new bxm_ajax;if(""==t.comments.value||""==t.name.value)return BXMalert(bxm_info,bxm_req_field),!1;e.onShow("");var i="newsid="+t.newsid.value;e.setVar("comments",e.encodeVAR(t.comments.value)),e.setVar("name",e.encodeVAR(t.name.value)),e.setVar("mail",e.encodeVAR(t.mail.value)),e.setVar("skin",bxm_skin),t.sec_code&&e.setVar("sec_code",t.sec_code.value),e.requestFile=bxm_root+"engine/ajax/newsaddcomments.php",e.method="POST",e.execute=!0,e.effect="blind",e.element="bxm-ajax-comments",e.sendAJAX(i)}function whenCommentsDeleted(t){t=parseInt(t),isNaN(t)||($("html"+($.browser.opera?"":",body")).animate({scrollTop:$("#comment-id-"+t).position().top-70},700),setTimeout(function(){$("#comment-id-"+t).hide("blind",{},1400)},700))}function DeleteComments(i,n,s){BXMconfirm(bxm_del_agree,bxm_confirm,function(){var t=new bxm_ajax;t.onShow("");var e="id="+i;t.setVar("bxm_allow_hash",n),t.setVar("area",s),t.requestFile=bxm_root+"engine/ajax/deletecomments.php",t.method="GET",t.onCompletion=whenCommentsDeleted,t.sendAJAX(e)})}function ckeck_uncheck_all(){for(var t=document.pmlist,e=0;e<t.elements.length;e++){var i=t.elements[e];"checkbox"==i.type&&(1==t.master_box.checked?i.checked=!1:i.checked=!0)}1==t.master_box.checked?t.master_box.checked=!1:t.master_box.checked=!0}function loadpoll(){$("#loading_poll").html("<img src='"+bxm_root+"templates/"+bxm_skin+"/images/loading.gif' alt='Загрузка'>"),$("#loading_poll").fadeIn("fast"),$("#poll_container").fadeIn("slow",function(){$.post(bxm_root+"engine/ajax/vote.php",{action:"load"},function(t){$("#poll_container").html(t),$("#results").hasClass("results")&&($("div[id='poll_result']").each(function(){var t=$(this).attr("name");$(this).css({width:"0%"}).animate({width:t+"%"},1600)}),$("#loading").fadeOut("fast"))},"html")})}function vote(){var t=$("#vote_id").val(),e=$("#vote_check").val();$("#poll_container").empty(),$("#poll_container").append('<div id="loading_poll" style="display:none"></div>'),$("#loading_poll").fadeIn("slow",function(){$("#loading_poll").html('<div align="center"><img src="'+bxm_root+"templates/"+bxm_skin+'/images/loading.gif" alt="Загрузка"></div>')}),$.post(bxm_root+"engine/ajax/vote.php",{action:"vote",voteId:t,voteCheck:e},function(t){0==t.status?$("#loading_poll").fadeIn("fast",function(){$("#loading_poll").empty(),$("#loading_poll").html(t.msg)}):1==t.status&&($("#loading_poll").empty(),loadpoll())},"json")}function addvote(t){$("#vote_check").val(t),$("#vote_b").show("fast")}function _stop_e_Propagation(t){return!t||browser.isIE?(window.event.returnValue=!1,window.event.cancelBubble=!0,window.event):(t.stopPropagation(),t.preventDefault(),t)}function BrowserDetect(){var t=navigator.userAgent.toLowerCase();this.isGecko=-1!=t.indexOf("gecko")&&-1==t.indexOf("safari"),this.isAppleWebKit=-1!=t.indexOf("applewebkit"),this.isOpera=-1!=t.indexOf("opera"),this.isIE=-1!=t.indexOf("msie")&&!this.isOpera&&-1==t.indexOf("webtv")}jQuery(function(){jQuery(window).scroll(function(){0!=jQuery(this).scrollTop()?jQuery("#toTop").fadeIn():jQuery("#toTop").fadeOut()}),jQuery("#toTop").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}),$(document).ready(function(){$(".opa").hover(function(){$(this).fadeTo("fast",.7)},function(){$(this).fadeTo("fast",1)}),$(".sfull span").click(function(){$(".sfull span").addClass("decor"),$(this).removeClass("decor"),$(".sfull input").val($(".sfull span").index(this))});var t=$(".sfull input").val();$(".sfull span, .stype span").addClass("decor"),$(".sfull span").eq(t).removeClass("decor"),$("input.q").focus(function(){ds_value=$(this).val(),$(this).val("")}),$("input.q").blur(function(){""==$.trim($(this).val())&&$(this).val(ds_value)}),$("span.password").click(function(){$(this).next().focus()}),$("input.password").focus(function(){" "==$(this).val()&&$(this).val(""),$(this).prev().hide()}),$("input.password").blur(function(){""==$.trim($(this).val())&&($(this).val(""),$(this).prev().show())})});var browser=new BrowserDetect;function get_object_from_event(t){return browser.isIE?window.event.srcElement:t.target}function _not_this_addEvent(t,e,i,n){return t.addEventListener?(t.addEventListener(e,i,n),!0):t.attachEvent?t.attachEvent("on"+e,i):void 0}function _ge_by_name(t){return document.getElementsByName(t)[0]}function xLoadScript(){var t,e,i=xLoadScript.arguments,n=i[0];1<i.length&&i[1],document.createElement&&document.getElementsByTagName&&(t=document.createElement("script"),e=document.getElementsByTagName("head"),t&&e.length&&(t.src=n,e[0].appendChild(t)))}function getOffsetHeight(t){return document.getElementById(t).offsetHeight}function getOffsetTop(t){var e=0;for(object=document.getElementById(t),e=object.offsetTop;"BODY"!=object.tagName&&object.offsetParent;)object=object.offsetParent,e+=object.offsetTop;return e}function getOffsetLeft(t){var e=0;for(object=document.getElementById(t),e=object.offsetLeft;"BODY"!=object.tagName&&object.offsetParent;)object=object.offsetParent,e+=object.offsetLeft;return e}function setLeftTop(t,e,i){document.getElementById(t).style.left=e+"px",document.getElementById(t).style.top=i+"px"}function addEvent(target,eventName,handlerName){var oldevent=eval("target.on"+eventName+"="+handlerName)}function $F(t){return o=_ge_by_name(t),"select"==o.nodeName.toLowerCase()?o.options[o.selectedIndex].text:o.value}function _not_this_removeEvent(t,e,i,n){return t.removeEventListener?(t.removeEventListener(e,i,n),!0):t.detachEvent?t.detachEvent("on"+e,i):void 0}function disable_input(){for(arg=disable_input.arguments,i=0;i<arg.length;i++){if("string"==typeof arg[i])_z=_ge(arg[i]);else{if(null==typeof arg[i])return;_z=arg[i]}_z&&"boolean"==typeof _z.disabled&&(_z.type&&"text"==_z.type&&(_z.style.backgroundColor="#D4D0C8"),_z.disabled=!0)}}function enable_input(){for(arg=enable_input.arguments,i=0;i<arg.length;i++){if("string"==typeof arg[i])_z=document.getElementById(arg[i]);else{if(null==typeof arg[i])return;_z=arg[i]}_z&&"boolean"==typeof _z.disabled&&(_z.type&&"text"==_z.type&&(_z.style.backgroundColor="white"),_z.disabled=!1)}}function _dropdown_div(e,i,n,s){this.id=e,this.parrent=i,this.excitator=n,this.react_on_focus=!0,this.var_obj_name=s,this.currentactive=!1,this.hide=function(){0!=this.currentactive&&(document.getElementById(this.id).style.visibility="hidden",this.currentactive=!1)},this.show=function(){document.getElementById(this.id).style.visibility="visible",this.currentactive=!0},this.onclick=function(t){t=_stop_e_Propagation(t),1!=this.currentactive?this.show():this.hide()},this.on_document_click=function(e){for(event_obj=browser.isIE?(event_id=window.event.srcElement.id,window.event.srcElement):(event_id=e.target.id,e.target),t=event_obj;"string"==typeof t.parentNode.id;){if(t.parentNode.id==this.id)return;t=t.parentNode}"null"!=event_id&&event_id!=this.id&&this.hide()},this.init=function(){null!=document.getElementById(this.id)&&(this.apply_styles(),this.align(),this.set_onclick_document_handler(),this.set_onclick_excitator_handler())},this.set_onclick_excitator_handler=function(){var t=document.getElementById(this.excitator);if("null"!=t){var e="function(e) { "+this.var_obj_name+".onclick(e); }";if("string"!=typeof this.excitator){var i=0;for(this.react_on_focus&&addEvent($(this.excitator[0]),"focus",e),i=0;i<this.excitator.length;i++)addEvent(document.getElementById(this.excitator[i]),"mousedown",e)}else addEvent(t,"mousedown",e),this.react_on_focus&&this.excitator!=this.parrent&&addEvent($(this.excitator),"focus",e)}},this.set_onclick_document_handler=function(){var t="function(e) { "+this.var_obj_name+".on_document_click(e); }";addEvent(document,"mousedown",t)},this.apply_styles=function(){document.getElementById(this.id).style.position="absolute",document.getElementById(this.id).style.visibility="hidden",document.getElementById(this.id).style.zindex=100},this.align=function(){var t=getOffsetTop(this.parrent),e=getOffsetLeft(this.parrent),i=getOffsetHeight(this.parrent);setLeftTop(this.id,e,t+i)},this.init()}function node_getElementById(t,e){tags=t.getElementsByTagName("a");for(var i=0;i<tags.length;i++)if(tags[i].id&&tags[i].id==e)return tags[i];return null}